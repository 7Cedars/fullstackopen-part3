{"ast":null,"code":"import _slicedToArray from\"/home/teijehidde/Documents/7CedarsGit/learning/FullstackOpen_part3/phonebook-frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState,useEffect}from'react';import PersonsForm from'./components/personForm';import itemService from'./services/personItems';import PersonLine from'./components/personLine';import Notification from'./components/Notification';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var App=function App(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),persons=_useState2[0],setPersons=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),newName=_useState4[0],setNewName=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),newNumber=_useState6[0],setNewNumber=_useState6[1];var _useState7=useState([]),_useState8=_slicedToArray(_useState7,2),personsToShow=_useState8[0],setPersonsToShow=_useState8[1];var _useState9=useState(null),_useState10=_slicedToArray(_useState9,2),successMessage=_useState10[0],setSuccessMessage=_useState10[1];var _useState11=useState(null),_useState12=_slicedToArray(_useState11,2),errorMessage=_useState12[0],setErrorMessage=_useState12[1];useEffect(function(){itemService.getAll().then(function(initialEntries){setPersons(initialEntries);setPersonsToShow(initialEntries);});},[]);useEffect(function(){setPersonsToShow(persons);},[persons]);var addPerson=function addPerson(event){event.preventDefault();var entryObject={name:newName,number:newNumber};console.log(persons);var doubleEntry=persons.find(function(person){return person.name.toLowerCase()===entryObject.name.toLowerCase();});if(!doubleEntry){itemService.create(entryObject).then(function(returnedItem){setPersons(returnedItem);setNewName(\"\");setNewNumber(\"\");});setSuccessMessage(\"Added \".concat(entryObject.name,\" succesfully!\"));setTimeout(function(){setSuccessMessage(null);},5000);}else{if(window.confirm(\"\".concat(entryObject.name,\" already has an entry in the phonebook. Update number?\"))){itemService.update(doubleEntry.id,entryObject).then(function(returnedItem){return setPersons(returnedItem);},setNewName(\"\"),setNewNumber(\"\"));}}};var handleFilterChange=function handleFilterChange(event){var _filteredPersons=persons.filter(function(person){return person.name.toLowerCase().includes(event.target.value.toLowerCase());});setPersonsToShow(_filteredPersons);};var toggleDeleteOf=function toggleDeleteOf(id){var _Person=persons.find(function(person){return person.id===id;});if(window.confirm(\"Delete the entry for \".concat(_Person.name,\"?\"))){itemService.deleteItem(id)// NB: Needs to be fixed in Part 2 submission! \n.then(function(returnedItem){setPersons(returnedItem);}).catch(function(error){setErrorMessage(\"Information of '\".concat(_Person.name,\"' was already removed from server\"));setTimeout(function(){setErrorMessage(null);},5000);});console.log(persons);}};var handleNameChange=function handleNameChange(event){// console.log(event.target.value)\nsetNewName(event.target.value);};var handleNumberChange=function handleNumberChange(event){// console.log(event.target.value)\nsetNewNumber(event.target.value);};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Phonebook\"}),/*#__PURE__*/_jsx(Notification.Success,{message:successMessage}),/*#__PURE__*/_jsx(Notification.Error,{message:errorMessage}),/*#__PURE__*/_jsx(\"form\",{children:/*#__PURE__*/_jsxs(\"div\",{children:[\"Filter: \",/*#__PURE__*/_jsx(\"input\",{onChange:handleFilterChange})]})}),/*#__PURE__*/_jsx(\"h2\",{children:\"Add a new entry:\"}),/*#__PURE__*/_jsx(PersonsForm,{addPerson:addPerson,handleNameChange:handleNameChange,handleNumberChange:handleNumberChange,newName:newName,newNumber:newNumber}),/*#__PURE__*/_jsx(\"h2\",{children:\"Numbers in phonebook\"}),/*#__PURE__*/_jsx(\"ul\",{children:personsToShow.map(function(person){return/*#__PURE__*/_jsx(PersonLine,{person:person,toggleDelete:function toggleDelete(){return toggleDeleteOf(person.id);}},person.id);})})]});};export default App;","map":{"version":3,"names":["useState","useEffect","PersonsForm","itemService","PersonLine","Notification","App","persons","setPersons","newName","setNewName","newNumber","setNewNumber","personsToShow","setPersonsToShow","successMessage","setSuccessMessage","errorMessage","setErrorMessage","getAll","then","initialEntries","addPerson","event","preventDefault","entryObject","name","number","console","log","doubleEntry","find","person","toLowerCase","create","returnedItem","setTimeout","window","confirm","update","id","handleFilterChange","_filteredPersons","filter","includes","target","value","toggleDeleteOf","_Person","deleteItem","catch","error","handleNameChange","handleNumberChange","map"],"sources":["/home/teijehidde/Documents/7CedarsGit/learning/FullstackOpen_part3/phonebook-frontend/src/App.js"],"sourcesContent":["import { useState, useEffect } from 'react'\nimport PersonsForm from './components/personForm'\nimport itemService from './services/personItems'\nimport PersonLine from './components/personLine'\nimport Notification from './components/Notification'\n\nconst App = () => {\n  const [persons, setPersons] = useState([])\n  const [newName, setNewName] = useState('')\n  const [newNumber, setNewNumber] = useState('')\n  const [personsToShow, setPersonsToShow] = useState([])\n  const [successMessage, setSuccessMessage] = useState(null)\n  const [errorMessage, setErrorMessage] = useState(null)\n\n  useEffect(() => {\n    itemService\n      .getAll()\n      .then(initialEntries => {\n        setPersons(initialEntries)\n        setPersonsToShow(initialEntries)\n      })\n  }, [])\n\n  useEffect(() => {\n    setPersonsToShow(persons)\n  }, [persons])\n  \n  const addPerson = (event) => {\n    event.preventDefault()\n    const entryObject = {\n        name: newName,\n        number: newNumber\n    }\n    console.log(persons)\n    let doubleEntry = persons.find(person => person.name.toLowerCase() === entryObject.name.toLowerCase())\n\n    if (!doubleEntry) {\n      itemService\n            .create(entryObject)\n            .then(returnedItem => {\n              setPersons(returnedItem)\n              setNewName(\"\")\n              setNewNumber(\"\")\n            })\n            setSuccessMessage(\n              `Added ${entryObject.name} succesfully!`\n            )\n            setTimeout(() => {\n              setSuccessMessage(null)\n            }, 5000)\n\n          } else { \n          \n          if (window.confirm(`${entryObject.name} already has an entry in the phonebook. Update number?`)) { \n            itemService\n            .update(doubleEntry.id, entryObject)\n            .then(returnedItem => \n              setPersons(returnedItem),\n              setNewName(\"\"),\n              setNewNumber(\"\")\n              )\n            } \n          }\n    }\n\n  const handleFilterChange = (event) => {\n\n    let _filteredPersons = persons.filter(person => \n      person.name.toLowerCase().includes(event.target.value.toLowerCase())\n    )\n    setPersonsToShow(_filteredPersons)\n  }\n\n  const toggleDeleteOf = (id) => {\n    let _Person = persons.find(person => person.id === id)\n\n    if (window.confirm(`Delete the entry for ${_Person.name}?`)) {\n      itemService\n        .deleteItem(id)\n        // NB: Needs to be fixed in Part 2 submission! \n        .then(returnedItem => {\n          setPersons(returnedItem)\n          })\n        .catch(error => {\n            setErrorMessage(\n              `Information of '${_Person.name}' was already removed from server`\n            )\n            setTimeout(() => {\n              setErrorMessage(null)\n            }, 5000)\n        })\n      console.log(persons)\n    }\n  }\n\n  const handleNameChange = (event) => {\n    // console.log(event.target.value)\n    setNewName(event.target.value)\n  }\n\n  const handleNumberChange = (event) => {\n    // console.log(event.target.value)\n    setNewNumber(event.target.value)\n  }\n\n  return (\n    <div>\n      <h2>Phonebook</h2>\n      <Notification.Success message={successMessage} />\n      <Notification.Error message={errorMessage} />\n      <form >\n            <div>\n                Filter: <input onChange={handleFilterChange} />\n            </div>\n        </form>\n      <h2>Add a new entry:</h2>\n        <PersonsForm \n          addPerson = {addPerson} \n          handleNameChange = {handleNameChange}\n          handleNumberChange = {handleNumberChange}\n          newName = {newName}\n          newNumber = {newNumber}\n         /> \n      <h2>Numbers in phonebook</h2>\n            <ul>\n            {personsToShow.map(\n                person => <PersonLine \n                  key={person.id} \n                  person={person} \n                  toggleDelete={() => toggleDeleteOf(person.id)}/>\n                )\n            }\n          </ul>\n    </div>\n  )\n}\n\nexport default App"],"mappings":"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"},"metadata":{},"sourceType":"module"}