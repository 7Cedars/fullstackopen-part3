{"ast":null,"code":"import _slicedToArray from\"/home/teijehidde/Documents/7CedarsGit/learning/FullstackOpen_part3/phonebook-frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState,useEffect}from'react';import PersonsForm from'./components/personForm';import itemService from'./services/personItems';import PersonLine from'./components/personLine';import Notification from'./components/Notification';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var App=function App(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),persons=_useState2[0],setPersons=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),personsToShow=_useState4[0],setPersonsToShow=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),newName=_useState6[0],setNewName=_useState6[1];var _useState7=useState(''),_useState8=_slicedToArray(_useState7,2),newNumber=_useState8[0],setNewNumber=_useState8[1];var _useState9=useState(null),_useState10=_slicedToArray(_useState9,2),successMessage=_useState10[0],setSuccessMessage=_useState10[1];var _useState11=useState(null),_useState12=_slicedToArray(_useState11,2),errorMessage=_useState12[0],setErrorMessage=_useState12[1];useEffect(function(){itemService.getAll().then(function(initialEntries){setPersons(initialEntries);setPersonsToShow(initialEntries);});},[]);useEffect(function(){setPersonsToShow(persons);},[persons]);var addPerson=function addPerson(event){event.preventDefault();var entryObject={name:newName,number:newNumber};console.log(persons);var doubleEntry=persons.find(function(person){return person.name.toLowerCase()===entryObject.name.toLowerCase();});if(!doubleEntry){itemService.create(entryObject).then(function(returnedItem){return setPersons(persons.concat(returnedItem),setNewName(\"\"),setNewNumber(\"\"),setSuccessMessage(\"Added \".concat(entryObject.name,\" succesfully!\")),setTimeout(function(){setSuccessMessage(null);},5000));}).catch(function(error){setErrorMessage(error.response.data.error);},setTimeout(function(){setErrorMessage(null);},5000));}else{if(window.confirm(\"\".concat(entryObject.name,\" already has an entry in the phonebook. Update number?\"))){itemService.update(doubleEntry.id,entryObject).then(function(returnedItem){return setPersons(persons.map(function(person){return person.id===doubleEntry.id?returnedItem:person;}));},setNewName(\"\"),setNewNumber(\"\")).catch(function(error){setErrorMessage(error.response.data.error);},setTimeout(function(){setErrorMessage(null);},5000));}}};var handleFilterChange=function handleFilterChange(event){var _filteredPersons=persons.filter(function(person){return person.name.toLowerCase().includes(event.target.value.toLowerCase());});setPersonsToShow(_filteredPersons);};var toggleDeleteOf=function toggleDeleteOf(id){var _Person=persons.find(function(person){return person.id===id;});if(window.confirm(\"Delete the entry for \".concat(_Person.name,\"?\"))){itemService.deleteItem(id).then(// fix (again..) in section 2 submission?\nsetPersons(persons.filter(function(person){return person.id!==id;}))).catch(function(error){setErrorMessage(\"Information of '\".concat(_Person.name,\"' was already removed from server\"));setTimeout(function(){setErrorMessage(null);},5000);});console.log(persons);}};var handleNameChange=function handleNameChange(event){// console.log(event.target.value)\nsetNewName(event.target.value);};var handleNumberChange=function handleNumberChange(event){// console.log(event.target.value)\nsetNewNumber(event.target.value);};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Phonebook\"}),/*#__PURE__*/_jsx(Notification.Success,{message:successMessage}),/*#__PURE__*/_jsx(Notification.Error,{message:errorMessage}),/*#__PURE__*/_jsx(\"form\",{children:/*#__PURE__*/_jsxs(\"div\",{children:[\"Filter: \",/*#__PURE__*/_jsx(\"input\",{onChange:handleFilterChange})]})}),/*#__PURE__*/_jsx(\"h2\",{children:\"Add a new entry:\"}),/*#__PURE__*/_jsx(PersonsForm,{addPerson:addPerson,handleNameChange:handleNameChange,handleNumberChange:handleNumberChange,newName:newName,newNumber:newNumber}),/*#__PURE__*/_jsx(\"h2\",{children:\"Numbers in phonebook\"}),/*#__PURE__*/_jsx(\"ul\",{children:personsToShow.map(function(person){return/*#__PURE__*/_jsx(PersonLine,{person:person,toggleDelete:function toggleDelete(){return toggleDeleteOf(person.id);}},person.id);})})]});};export default App;","map":{"version":3,"names":["useState","useEffect","PersonsForm","itemService","PersonLine","Notification","App","persons","setPersons","personsToShow","setPersonsToShow","newName","setNewName","newNumber","setNewNumber","successMessage","setSuccessMessage","errorMessage","setErrorMessage","getAll","then","initialEntries","addPerson","event","preventDefault","entryObject","name","number","console","log","doubleEntry","find","person","toLowerCase","create","returnedItem","concat","setTimeout","catch","error","response","data","window","confirm","update","id","map","handleFilterChange","_filteredPersons","filter","includes","target","value","toggleDeleteOf","_Person","deleteItem","handleNameChange","handleNumberChange"],"sources":["/home/teijehidde/Documents/7CedarsGit/learning/FullstackOpen_part3/phonebook-frontend/src/App.js"],"sourcesContent":["import { useState, useEffect } from 'react'\nimport PersonsForm from './components/personForm'\nimport itemService from './services/personItems'\nimport PersonLine from './components/personLine'\nimport Notification from './components/Notification'\n\nconst App = () => {\n  const [persons, setPersons] = useState([])\n  const [personsToShow, setPersonsToShow] = useState([])\n  const [newName, setNewName] = useState('')\n  const [newNumber, setNewNumber] = useState('')\n  const [successMessage, setSuccessMessage] = useState(null)\n  const [errorMessage, setErrorMessage] = useState(null)\n\n  useEffect(() => {\n    itemService\n      .getAll()\n      .then(initialEntries => {\n        setPersons(initialEntries)\n        setPersonsToShow(initialEntries)\n      })\n  }, [])\n  \n  useEffect(() => {\n    setPersonsToShow(persons)\n  }, [persons])\n\n  const addPerson = (event) => {\n    event.preventDefault()\n    const entryObject = {\n        name: newName,\n        number: newNumber\n    }\n    console.log(persons)\n    let doubleEntry = persons.find(person => person.name.toLowerCase() === entryObject.name.toLowerCase())\n\n    if (!doubleEntry) {\n      itemService\n            .create(entryObject)\n            .then(returnedItem => \n              setPersons(persons.concat(returnedItem), \n              setNewName(\"\"),\n              setNewNumber(\"\"),\n              setSuccessMessage(\n                `Added ${entryObject.name} succesfully!`\n              ),\n              setTimeout(() => {\n                setSuccessMessage(null)\n              }, 5000)\n            ))  \n            .catch(error => {\n              setErrorMessage(error.response.data.error)\n            },\n              setTimeout(() => {\n                setErrorMessage(null)\n              }, 5000)\n            )\n\n          } else { \n          \n          if (window.confirm(`${entryObject.name} already has an entry in the phonebook. Update number?`)) { \n            itemService\n            .update(doubleEntry.id, entryObject)\n            .then(returnedItem => \n              setPersons(persons.map(person => (person.id === doubleEntry.id) ? returnedItem : person)), \n              setNewName(\"\"),\n              setNewNumber(\"\")\n              )\n            .catch(error => {\n              setErrorMessage(error.response.data.error)\n              },\n              setTimeout(() => {\n                setErrorMessage(null)\n              }, 5000)\n              )\n            } \n          }\n    }\n\n  const handleFilterChange = (event) => {\n\n    let _filteredPersons = persons.filter(person => \n      person.name.toLowerCase().includes(event.target.value.toLowerCase())\n    )\n    setPersonsToShow(_filteredPersons)\n  }\n\n  const toggleDeleteOf = (id) => {\n    let _Person = persons.find(person => person.id === id)\n\n    if (window.confirm(`Delete the entry for ${_Person.name}?`)) {\n      itemService\n        .deleteItem(id)\n        .then(\n          // fix (again..) in section 2 submission?\n          setPersons(persons.filter(person => (person.id !== id)))\n          )\n        .catch(error => {\n            setErrorMessage(\n              `Information of '${_Person.name}' was already removed from server`\n            )\n            setTimeout(() => {\n              setErrorMessage(null)\n            }, 5000)\n        })\n      console.log(persons)\n    }\n  }\n\n  const handleNameChange = (event) => {\n    // console.log(event.target.value)\n    setNewName(event.target.value)\n  }\n\n  const handleNumberChange = (event) => {\n    // console.log(event.target.value)\n    setNewNumber(event.target.value)\n  }\n\n  return (\n    <div>\n      <h2>Phonebook</h2>\n      <Notification.Success message={successMessage} />\n      <Notification.Error message={errorMessage} />\n      <form >\n            <div>\n                Filter: <input onChange={handleFilterChange} />\n            </div>\n        </form>\n      <h2>Add a new entry:</h2>\n        <PersonsForm \n          addPerson = {addPerson} \n          handleNameChange = {handleNameChange}\n          handleNumberChange = {handleNumberChange}\n          newName = {newName}\n          newNumber = {newNumber}\n         /> \n      <h2>Numbers in phonebook</h2>\n            <ul>\n            {personsToShow.map(\n                person => <PersonLine \n                  key={person.id} \n                  person={person} \n                  toggleDelete={() => toggleDeleteOf(person.id)}/>\n                )\n            }\n          </ul>\n    </div>\n  )\n}\n\nexport default App"],"mappings":"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"},"metadata":{},"sourceType":"module"}